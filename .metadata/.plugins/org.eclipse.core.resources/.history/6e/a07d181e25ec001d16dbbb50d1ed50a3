<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page import="java.io.File"%>
<%@ taglib prefix="sec"
	uri="http://www.springframework.org/security/tags"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css">
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=272bc96032396df76a8c8d79f886c824&libraries=services"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>		

</head>
<body>
<p style="color:#ffbc00" class="aa" data-bs-toggle="modal" data-bs-target="#reviewmodifymodal" data-rcontent="${reviewlist.r_content}">수정</p> &nbsp;

<!-- 리뷰수정 Modal -->

  <div class="modal fade" id="reviewmodifymodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-80size">
    <div class="modal-content modal-80size">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel" style="color:black;"><Strong style="color:black;">솔직한 후기를 남겨주세요!2</Strong></h1>
      </div>
      <div class="modal-body">
        <h6 style="color:black;"><Strong style="color:black;">일반이용 후기 작성 요령</Strong></h6>
        <ul>
        <li style="font-size:15px;">해당 코치님에게 트레이닝을 받은 증빙사진이 필요합니다.
		(PT 약정서/계약서 or 코치님과 함께 찍은 사진 등 기타)</li>
		 <li style="font-size:15px;">증빙사진의 공개/비공개 여부를 선택할 수 있습니다.</li>
		 <li style="font-size:15px;">증빙이 적절하지 않을 시 삭제처리 됩니다.(상시 모니터링 중)</li>
        </ul>
         <h6 style="color:black;"><Strong style="color:black;">별점을 선택해주세요</Strong></h6>
   	
  <!-- 편의 상 가장 첫번째의 별은 기본으로 class="on"이 되게 설정해주었습니다. -->
  <c:forEach var="reviewlist" items="${reviewlist}">
 <sec:authentication property="principal" var="principal"/> 
<c:if test="${reviewlist.memberprofile_u_key==principal.u_key }">
<c:if test="${reviewlist.r_starR==1 }">
<div class="starRev">
  <span class="starR on" >⭐</span>
  <span class="starR">⭐</span>
  <span class="starR" >⭐</span>
  <span class="starR" >⭐</span>
  <span class="starR" >⭐</span>
</div>
</c:if>
<c:if test="${reviewlist.r_starR==2 }">
<div class="starRev">
  <span class="starR on" >⭐</span>
  <span class="starR on">⭐</span>
  <span class="starR" >⭐</span>
  <span class="starR" >⭐</span>
  <span class="starR" >⭐</span>
</div>
</c:if>
<c:if test="${reviewlist.r_starR==3 }">
<div class="starRev">
  <span class="starR on" >⭐</span>
  <span class="starR on">⭐</span>
  <span class="starR on" >⭐</span>
  <span class="starR" >⭐</span>
  <span class="starR" >⭐</span>
</div>
</c:if>
<c:if test="${reviewlist.r_starR==4 }">
<div class="starRev">
  <span class="starR on" >⭐</span>
  <span class="starR on">⭐</span>
  <span class="starR on" >⭐</span>
  <span class="starR on" >⭐</span>
  <span class="starR" >⭐</span>
</div>
</c:if>
<c:if test="${reviewlist.r_starR==5 }">
<div class="starRev">
  <span class="starR on" >⭐</span>
  <span class="starR on">⭐</span>
  <span class="starR on" >⭐</span>
  <span class="starR on" >⭐</span>
  <span class="starR on" >⭐</span>
</div>
</c:if>
   
	
         <p><p>					
				
				<div class="opencheck" style="display: flex;align-items: center;">
         		 <h6 style="color:black;"><Strong style="color:black;">증빙사진을 올려주세요</Strong></h6><p><Strong style="color:black; font-size:12px;">( 최대 3장까지 등록가능합니다 )</Strong></p>
				<c:if test="${reviewlist.r_opencheck==0 }">
				<span style="margin-top:-30px; margin-right:-10px;"class="open"  >√</span><p style="color:black;margin-top:5px;">사진공개</p>
				</c:if>
				<c:if test="${reviewlist.r_opencheck==1 }">
				<span style="margin-top:-30px; margin-right:-10px;"class="open on"  >√</span><p style="color:black;margin-top:5px;">사진공개</p>
				</c:if>
				</div>         
         
          	  <form method="POST" onsubmit="return false;" enctype="multipart/form-data">
        <input type="file" onchange="addFile2(this);" multiple />
          
        <div class="file-list2"></div>
  	
   
    </form>
            <h6 style="color:black; margin-top:0px;"><Strong style="color:black;">내용을 작성해주세요</Strong></h6>
            
            <div class="input-group has-validation">
								<textarea style="height:200px;"cols="30" rows="10" class="form-control" id="reviewcontent" name="tf_intro"></textarea>
							</div>
         </c:if>
			</c:forEach>
            
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">취소</button>
        <button type="button" class="btn btn-outline-primary" onclick="submitForm()" data-target="#clickReviewinsert" data-bs-dismiss="modal">확인</button>
          <sec:authentication property="principal" var="principal"/> 
     <input type="hidden"  id="memberprofile_u_key" value="${principal.u_key}">
       <input type="hidden"  id="memberprofile_name" value="${principal.uName}">
      </div>
    </div>
  </div>
</div>		

</body>

<script>
$('#reviewmodifymodal').on('show.bs.modal', function(event) {          
    r_content = "fdasf";
 	//document.getElementById("reviewcontent").innerHTML = r_content;
    
    console.log("r_content:"+r_content);
   
 })
</script>
</html>